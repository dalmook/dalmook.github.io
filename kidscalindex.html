<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>어린이 계산기</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        .display-area {
            width: 90%;
            min-height: 150px;
            border: 2px solid #4CAF50;
            border-radius: 10px;
            background-color: #ffffff;
            margin-bottom: 20px;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: flex-start;
            overflow-y: auto;
        }
        .fruit {
            width: 50px;
            height: 50px;
            margin: 5px;
            position: relative;
        }
        .fruit img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }
        .count {
            position: absolute;
            bottom: 0;
            right: 0;
            background-color: rgba(255,255,255,0.7);
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 14px;
            font-weight: bold;
        }
        .buttons-row {
            width: 90%;
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }
        .buttons-row .button {
            width: 60px;
            height: 60px;
            margin: 5px;
            border: none;
            border-radius: 10px;
            background-color: #ffcccb;
            font-size: 24px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .buttons-row .button.operator {
            background-color: #add8e6;
        }
        .buttons-row .button:active {
            background-color: #ddd;
        }
        .result-area {
            width: 90%;
            min-height: 150px;
            border: 2px solid #ffa500;
            border-radius: 10px;
            background-color: #fffaf0;
            margin-bottom: 20px;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: flex-start;
            overflow-y: auto;
        }
        h1 {
            color: #333;
        }
    </style>
</head>
<body>

    <h1>어린이 계산기</h1>

    <!-- 결과 표시 영역 -->
    <div class="result-area" id="result-area">
        <!-- 결과 과일이 여기에 표시됩니다 -->
    </div>

    <!-- 현재 계산식 표시 영역 -->
    <div class="display-area" id="display-area">
        <!-- 현재 계산식이 여기에 표시됩니다 -->
    </div>

    <!-- 과일 버튼 행 -->
    <div class="buttons-row" id="fruits-row">
        <!-- 9종류의 과일 버튼 -->
        <!-- 예시로 사과, 바나나, 오렌지 등 9가지 과일을 사용 -->
        <!-- 실제 이미지 URL로 교체하세요 -->
        <button class="button fruit-button" data-fruit="apple">
            <img src="https://via.placeholder.com/50x50.png?text=🍎" alt="사과">
        </button>
        <button class="button fruit-button" data-fruit="banana">
            <img src="https://via.placeholder.com/50x50.png?text=🍌" alt="바나나">
        </button>
        <button class="button fruit-button" data-fruit="orange">
            <img src="https://via.placeholder.com/50x50.png?text=🍊" alt="오렌지">
        </button>
        <button class="button fruit-button" data-fruit="grape">
            <img src="https://via.placeholder.com/50x50.png?text=🍇" alt="포도">
        </button>
        <button class="button fruit-button" data-fruit="strawberry">
            <img src="https://via.placeholder.com/50x50.png?text=🍓" alt="딸기">
        </button>
        <button class="button fruit-button" data-fruit="pineapple">
            <img src="https://via.placeholder.com/50x50.png?text=🍍" alt="파인애플">
        </button>
        <button class="button fruit-button" data-fruit="watermelon">
            <img src="https://via.placeholder.com/50x50.png?text=🍉" alt="수박">
        </button>
        <button class="button fruit-button" data-fruit="cherry">
            <img src="https://via.placeholder.com/50x50.png?text=🍒" alt="체리">
        </button>
        <button class="button fruit-button" data-fruit="pear">
            <img src="https://via.placeholder.com/50x50.png?text=🍐" alt="배">
        </button>
    </div>

    <!-- 연산자 버튼 행 -->
    <div class="buttons-row" id="operators-row">
        <button class="button operator" data-operator="+">+</button>
        <button class="button operator" data-operator="-">-</button>
        <button class="button operator" data-operator="*">×</button>
        <button class="button operator" data-operator="/">÷</button>
        <button class="button operator" data-operator="=">=</button>
    </div>

    <script>
        // 과일 데이터
        const fruitsData = {
            apple: { name: '사과', img: 'https://via.placeholder.com/50x50.png?text=🍎' },
            banana: { name: '바나나', img: 'https://via.placeholder.com/50x50.png?text=🍌' },
            orange: { name: '오렌지', img: 'https://via.placeholder.com/50x50.png?text=🍊' },
            grape: { name: '포도', img: 'https://via.placeholder.com/50x50.png?text=🍇' },
            strawberry: { name: '딸기', img: 'https://via.placeholder.com/50x50.png?text=🍓' },
            pineapple: { name: '파인애플', img: 'https://via.placeholder.com/50x50.png?text=🍍' },
            watermelon: { name: '수박', img: 'https://via.placeholder.com/50x50.png?text=🍉' },
            cherry: { name: '체리', img: 'https://via.placeholder.com/50x50.png?text=🍒' },
            pear: { name: '배', img: 'https://via.placeholder.com/50x50.png?text=🍐' }
        };

        // 계산 로직 변수
        let currentOperand = 0;
        let currentOperator = null;
        let previousOperand = null;

        // DOM 요소
        const displayArea = document.getElementById('display-area');
        const resultArea = document.getElementById('result-area');
        const fruitButtons = document.querySelectorAll('.fruit-button');
        const operatorButtons = document.querySelectorAll('.operator');

        // 과일 버튼 클릭 이벤트
        fruitButtons.forEach(button => {
            button.addEventListener('click', () => {
                addFruit();
            });
        });

        // 연산자 버튼 클릭 이벤트
        operatorButtons.forEach(button => {
            button.addEventListener('click', () => {
                const operator = button.getAttribute('data-operator');
                handleOperator(operator);
            });
        });

        // 과일 추가 함수
        function addFruit() {
            currentOperand += 1;
            updateDisplay();
        }

        // 연산자 처리 함수
        function handleOperator(operator) {
            if (operator === '=') {
                if (currentOperator && previousOperand !== null) {
                    const result = calculate(previousOperand, currentOperator, currentOperand);
                    displayResult(result);
                    // 초기화
                    currentOperand = 0;
                    currentOperator = null;
                    previousOperand = null;
                    updateDisplay();
                }
            } else {
                if (currentOperator && previousOperand !== null) {
                    // 연속된 연산자 처리
                    previousOperand = calculate(previousOperand, currentOperator, currentOperand);
                    currentOperator = operator;
                    currentOperand = 0;
                } else {
                    previousOperand = currentOperand;
                    currentOperator = operator;
                    currentOperand = 0;
                }
                updateDisplay();
            }
        }

        // 계산 함수
        function calculate(a, operator, b) {
            switch(operator) {
                case '+':
                    return a + b;
                case '-':
                    return a - b;
                case '*':
                    return a * b;
                case '/':
                    return b !== 0 ? a / b : 0;
                default:
                    return 0;
            }
        }

        // 디스플레이 업데이트 함수
        function updateDisplay() {
            // 현재 계산식 표시
            displayArea.innerHTML = '';

            if (previousOperand !== null) {
                // 이전 피연산자 표시
                for (let i = 0; i < previousOperand; i++) {
                    const fruitImg = document.createElement('img');
                    fruitImg.src = getRandomFruitImage();
                    fruitImg.style.width = '30px';
                    fruitImg.style.height = '30px';
                    fruitImg.style.margin = '2px';
                    displayArea.appendChild(fruitImg);
                }

                // 연산자 표시
                if (currentOperator) {
                    const operatorSpan = document.createElement('span');
                    operatorSpan.textContent = ` ${currentOperator} `;
                    operatorSpan.style.fontSize = '24px';
                    operatorSpan.style.margin = '5px';
                    displayArea.appendChild(operatorSpan);
                }
            }

            // 현재 피연산자 표시
            for (let i = 0; i < currentOperand; i++) {
                const fruitImg = document.createElement('img');
                fruitImg.src = getRandomFruitImage();
                fruitImg.style.width = '30px';
                fruitImg.style.height = '30px';
                fruitImg.style.margin = '2px';
                displayArea.appendChild(fruitImg);
            }
        }

        // 결과 표시 함수
        function displayResult(result) {
            resultArea.innerHTML = '';
            const roundedResult = Math.round(result);
            for (let i = 0; i < roundedResult; i++) {
                const fruitImg = document.createElement('img');
                fruitImg.src = getRandomFruitImage();
                fruitImg.style.width = '50px';
                fruitImg.style.height = '50px';
                fruitImg.style.margin = '5px';
                resultArea.appendChild(fruitImg);
            }
        }

        // 랜덤 과일 이미지 선택 함수
        function getRandomFruitImage() {
            const fruitKeys = Object.keys(fruitsData);
            const randomKey = fruitKeys[Math.floor(Math.random() * fruitKeys.length)];
            return fruitsData[randomKey].img;
        }

    </script>

</body>
</html>
